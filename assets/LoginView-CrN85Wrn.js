import{_ as w,r as m,c as V,a as l,b as o,d as t,w as c,u as h,f as k,n as y,e as I,p as S,z as p}from"./index-BBH-rqu3.js";const x={class:"login-container"},L={class:"login-header"},N={class:"login-form"},C={style:{margin:"16px"}},B={__name:"LoginView",setup(T){const i=h(),u=m(""),d=m(""),_=()=>{i.back()},f=async a=>{try{const e=await I.post("/user/check-login",{username:a.username,password:a.password});if(e.data.code===200){const n=localStorage.getItem("userInfo");let s;n?(s=JSON.parse(n),s.nickname=a.username):s={id:1,nickname:a.username,avatar:"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg",signature:"这是我的个性签名"},localStorage.setItem("userInfo",JSON.stringify(s)),localStorage.setItem("isLoggedIn","true"),S("登录成功"),i.push("/profile")}else p(e.data.message||"登录失败")}catch(e){console.error("登录失败",e),p("登录失败，请重试")}};return(a,e)=>{const n=t("van-nav-bar"),s=t("van-field"),v=t("van-cell-group"),g=t("van-button"),b=t("van-form");return k(),V("div",x,[l("div",L,[o(n,{title:"登录","left-arrow":"",onClickLeft:_})]),l("div",N,[o(b,{onSubmit:f},{default:c(()=>[o(v,{inset:""},{default:c(()=>[o(s,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=r=>u.value=r),name:"username",label:"用户名",placeholder:"请输入用户名",rules:[{required:!0,message:"请填写用户名"}],class:"custom-field"},null,8,["modelValue"]),o(s,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=r=>d.value=r),type:"password",name:"password",label:"密码",placeholder:"请输入密码",rules:[{required:!0,message:"请填写密码"}],class:"custom-field"},null,8,["modelValue"])]),_:1}),l("div",C,[o(g,{round:"",block:"",type:"primary","native-type":"submit"},{default:c(()=>e[2]||(e[2]=[y(" 登录 ")])),_:1,__:[2]})])]),_:1})])])}}},j=w(B,[["__scopeId","data-v-0a92dabf"]]);export{j as default};

import{_ as j,r as i,o as A,c as _,a as t,b as n,w as r,d as s,F as u,e as v,f as m,u as G,g as c,h as C,t as b,s as x}from"./index-CQ_8GmyQ.js";import{餐 as J,乳 as K,美 as O,酒 as Q,粮 as W,冰 as X,海 as Y,肉 as Z,新 as ee,时 as ae}from"./时令水果-DDy7EzII.js";const te={class:"home"},oe={class:"search-container"},ne=["src"],se={class:"category-container"},ce={class:"category-grid"},ie=["onClick"],re={class:"category-icon"},le=["src","alt"],_e={class:"category-name"},de={class:"product-list"},ue={class:"product-info"},ve={class:"product-title"},me={class:"product-price-cart"},pe={class:"product-price"},he={__name:"HomeView",setup(fe){const V=G(),p=i(""),k=i([]),I=i([]),h=i([]),d=i(!1),f=i(!1),g=i(0),B=i(["全部","菜谱","早餐","休闲","人气"]),T=async()=>{try{const e=await m.get("/banners");e.data.code===200&&(k.value=e.data.data)}catch(e){console.error("获取轮播图失败",e)}},F=()=>{I.value=[{id:1,name:"餐饮美食",icon:J},{id:2,name:"乳品烘焙",icon:K},{id:3,name:"美妆百货",icon:O},{id:4,name:"酒水饮料",icon:Q},{id:5,name:"粮油调味",icon:W},{id:6,name:"冰品面点",icon:X},{id:7,name:"海鲜水产",icon:Y},{id:8,name:"肉禽蛋品",icon:Z},{id:9,name:"新鲜蔬菜",icon:ee},{id:10,name:"时令水果",icon:ae}]},y=async()=>{try{d.value=!0;const e=await m.get("/products");e.data.code===200&&(h.value=e.data.data,f.value=!0)}catch(e){console.error("获取商品失败",e)}finally{d.value=!1}},S=async()=>{try{d.value=!0;const e=await m.get(`/search?keyword=${p.value}`);e.data.code===200&&(h.value=e.data.data,f.value=!0)}catch(e){console.error("搜索商品失败",e)}finally{d.value=!1}},U=async e=>{try{(await m.post("/cart/add",{productId:e.id,quantity:1})).data.code===200&&x("添加成功")}catch(o){console.error("添加购物车失败",o),x("添加失败")}},q=e=>{g.value=e,y()},z=e=>{V.push({name:"category",query:{categoryId:e.id}})};return A(()=>{T(),F(),y()}),(e,o)=>{const w=s("van-icon"),H=s("van-search"),N=s("van-swipe-item"),R=s("van-swipe"),D=s("van-image"),E=s("van-list"),L=s("van-pull-refresh"),M=s("van-tab"),P=s("van-tabs");return c(),_("div",te,[t("div",oe,[n(H,{modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=a=>p.value=a),placeholder:"水果",shape:"round",background:"#42b983",onSearch:S},{left:r(()=>[n(w,{name:"location-o",size:"18"})]),right:r(()=>[n(w,{name:"chat-o",size:"18",style:{"margin-right":"10px"}})]),_:1},8,["modelValue"])]),n(R,{class:"banner",autoplay:3e3,"indicator-color":"white"},{default:r(()=>[(c(!0),_(u,null,v(k.value,a=>(c(),C(N,{key:a.id},{default:r(()=>[t("img",{src:a.image,alt:"banner"},null,8,ne)]),_:2},1024))),128))]),_:1}),t("div",se,[t("div",ce,[(c(!0),_(u,null,v(I.value,a=>(c(),_("div",{key:a.id,class:"category-item",onClick:$=>z(a)},[t("div",re,[t("img",{src:a.icon,alt:a.name},null,8,le)]),t("div",_e,b(a.name),1)],8,ie))),128))])]),n(P,{active:g.value,"onUpdate:active":o[2]||(o[2]=a=>g.value=a),onChange:q,sticky:""},{default:r(()=>[(c(!0),_(u,null,v(B.value,(a,$)=>(c(),C(M,{key:$,title:a},{default:r(()=>[n(L,{onRefresh:y},{default:r(()=>[n(E,{loading:d.value,"onUpdate:loading":o[1]||(o[1]=l=>d.value=l),finished:f.value,"finished-text":"没有更多了"},{default:r(()=>[t("div",de,[(c(!0),_(u,null,v(h.value,l=>(c(),_("div",{class:"product-item",key:l.id},[n(D,{src:l.image,width:"100%",height:"100px"},null,8,["src"]),t("div",ue,[t("div",ve,b(l.title),1),t("div",me,[t("span",pe,"¥"+b(l.price.toFixed(2)),1),n(w,{name:"cart-o",class:"cart-icon",onClick:ge=>U(l)},null,8,["onClick"])])])]))),128))])]),_:1},8,["loading","finished"])]),_:1})]),_:2},1032,["title"]))),128))]),_:1},8,["active"])])}}},be=j(he,[["__scopeId","data-v-f9c893bf"]]);export{be as default};
